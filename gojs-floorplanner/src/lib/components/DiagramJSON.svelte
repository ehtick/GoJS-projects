<script lang="ts">
  // Contains the display of the model in JSON in the Model tab of the footer
  // Also contains the example model JSON
  let { model = $bindable(), exampleModel = $bindable() } = $props();

  exampleModel = 
`{ "class": "GraphLinksModel",
  "linkKeyProperty": "key",
  "linkFromPortIdProperty": "fromPort",
  "linkToPortIdProperty": "toPort",
  "nodeDataArray": [
{"category":"wallPoint","loc":"-400 -150","size":14,"key":-1,"miterPoints":["-393 -143","-407 -157"],"rooms":[-68]},
{"category":"wallPoint","loc":"-400 450","size":14,"key":-2,"miterPoints":["-393 443","-407 457"],"rooms":[-71]},
{"category":"wallPoint","loc":"460 450","size":14,"key":-3,"miterPoints":["465 443","455 443","460 457"],"rooms":[-72,-84]},
{"category":"wallPoint","loc":"460 -150","size":14,"key":-5,"miterPoints":["465 -143","460 -157","455 -143"],"rooms":[-69,-84]},
{"category":"wallPoint","loc":"-400 190","size":14,"key":-6,"miterPoints":["-393 195","-393 185","-407 190"],"rooms":[-68,-71]},
{"category":"wallPoint","loc":"0 190","size":10,"key":-7,"miterPoints":["5 185","-5 185","-3.061616997868383e-16 195"],"rooms":[-69,-70,-71]},
{"category":"wallPoint","loc":"0 -150","key":-8,"size":14,"miterPoints":["5 -143","4.286263797015736e-16 -157","-5 -143"],"rooms":[-68,-69]},
{"category":"wallPoint","loc":"80 190","size":10,"key":-9,"rooms":[-69,-71],"miterPoints":["79 196","79 184"]},
{"category":"wallPoint","loc":"180 190","size":10,"key":-10,"rooms":[-69,-71],"miterPoints":["181 184","181 196"]},
{"category":"wallPoint","loc":"460 190","key":-11,"size":10,"miterPoints":["465 190","455 185","455 195"],"rooms":[-69,-71,-84]},
{"category":"wallPoint","loc":"0 -70","size":10,"key":-12,"rooms":[-68,-69],"miterPoints":["-6 -71","6 -71"]},
{"category":"wallPoint","loc":"0 30","size":10,"key":-13,"miterPoints":["5 25","-5 35"],"rooms":[-68,-69,-70]},
{"category":"wallPart","type":"door","linkKey":-7,"segFrac":0.5,"size":"60 14","flipped":true,"swapped":false,"alignOffset":-30,"key":-18},
{"category":"wallPart","type":"window","linkKey":-5,"segFrac":0.420964005179413,"size":"60 14","key":-22},
{"category":"wallPart","type":"window","linkKey":-5,"segFrac":0.27360284222772024,"size":"60 14","key":-23},
{"category":"wallPart","type":"window","linkKey":-5,"segFrac":0.717391304347826,"size":"100 14","key":-24},
{"category":"wallPart","type":"window","linkKey":-8,"segFrac":0.5,"size":"90 14","key":-25},
{"category":"wallPart","type":"window","linkKey":-1,"segFrac":0.5,"size":"80 14","key":-26},
{"category":"wallPart","type":"door","linkKey":-11,"segFrac":0.5,"size":"60 10","flipped":false,"swapped":false,"alignOffset":30,"key":-27},
{"category":"wallPart","type":"door","linkKey":-10,"segFrac":0.35294117647058826,"size":"60 10","flipped":false,"swapped":false,"alignOffset":30,"key":-28},
{"category":"wallPoint","loc":"-160 30","size":10,"key":-29,"miterPoints":["-155 35","-165 25"],"rooms":[-68,-70]},
{"category":"wallPoint","loc":"-160 190","key":-30,"size":10,"miterPoints":["-155 185","-165 185","-160 195"],"rooms":[-68,-70,-71]},
{"category":"wallPart","type":"door","linkKey":-17,"segFrac":0.625,"size":"60 10","flipped":false,"swapped":false,"alignOffset":30,"key":-31},
{"category":"wallPoint","loc":"460 330","size":10,"key":-34,"miterPoints":["465 330","455 325","455 335"],"rooms":[-72,-71,-84]},
{"category":"wallPoint","loc":"250 330","size":10,"key":-35,"miterPoints":["255 335","245 325"],"rooms":[-72,-71]},
{"category":"wallPoint","loc":"250 450","key":-36,"size":14,"miterPoints":["255 443","245 443","250 457"],"rooms":[-72,-71]},
{"category":"wallPart","type":"window","linkKey":-20,"segFrac":0.2857142857142857,"size":"60 14","key":-39},
{"category":"wallPart","type":"door","linkKey":-21,"segFrac":0.5,"size":"60 10","flipped":false,"swapped":false,"alignOffset":30,"key":-40},
{"category":"wallPart","type":"window","linkKey":-2,"segFrac":0.3125,"size":"92 14","key":-41},
{"category":"wallPart","type":"window","linkKey":-2,"segFrac":0.7013711744820459,"size":"85 14","key":-42},
{"key":-43,"caption":"Bed","type":"Bed","geoType":"bed","width":76.2,"height":101.6,"notes":"","loc":"-270 -90"},
{"key":-44,"caption":"Generic Object","type":"Round Table","shape":"Rectangle","width":44,"height":37,"notes":"","loc":"-202 -120"},
{"key":-45,"caption":"Sink","type":"Sink","geoType":"sink","width":27,"height":27,"notes":"","loc":"-21.44881567716237 167.54813756638845","angle":90},
{"key":-46,"caption":"Toilet","type":"Toilet","geoType":"toilet","width":25,"height":35,"notes":"","loc":"-25.035060460925646 104.43210114757207","angle":90},
{"key":-47,"caption":"Shower/Tub","type":"Shower/Tub","geoType":"shower","width":45,"height":75,"notes":"","loc":"-115.29397871025104 59.723117611675896","angle":270},
{"key":-48,"caption":"Generic Object","type":"Round Table","shape":"Rectangle","width":111,"height":40,"notes":"","loc":"-290 163.5"},
{"key":-49,"caption":"Sofa","type":"Sofa","geoType":"sofaMedium","height":45,"width":90,"notes":"","loc":"-290 60","angle":180},
{"key":-50,"caption":"Sink","type":"Sink","geoType":"sink","width":27,"height":27,"notes":"","loc":"375.7561832795903 427.6823455519727","angle":180},
{"key":-51,"caption":"Toilet","type":"Toilet","geoType":"toilet","width":25,"height":35,"notes":"","loc":"351.4928652788315 354.21730979704097","angle":0},
{"key":-52,"caption":"Double Sink","type":"Double Sink","geoType":"doubleSink","height":25,"width":45,"notes":"","loc":"300 -130"},
{"key":-53,"caption":"Stove","type":"Stove","geoType":"stove","width":50,"height":50,"notes":"","loc":"154.8012736156658 -116.68780334364718"},
{"key":-54,"caption":"Dining Table","type":"Dining Table","geoType":"diningTable","width":155,"height":77,"notes":"","loc":"300 90"},
{"key":-55,"caption":"Round Table","type":"Round Table","shape":"Ellipse","width":35,"height":34,"notes":"","loc":"-350 110"},
{"key":-56,"caption":"Round Table","type":"Round Table","shape":"Ellipse","width":61,"height":61,"notes":"","loc":"570 50"},
{"key":-57,"caption":"Round Table","type":"Round Table","shape":"Ellipse","width":61,"height":61,"notes":"","loc":"570 250"},
{"key":-58,"caption":"Sofa","type":"Sofa","geoType":"sofaMedium","height":45,"width":90,"notes":"","loc":"-70 230","angle":180},
{"key":-59,"caption":"Generic Object","type":"Round Table","shape":"Rectangle","width":132,"height":64,"notes":"","loc":"-70 400"},
{"key":-60,"caption":"Round Table","type":"Round Table","shape":"Ellipse","width":53,"height":53,"notes":"","loc":"-70 300"},
{"key":-61,"caption":"Generic Object","type":"Round Table","shape":"Rectangle","width":64,"height":39,"notes":"","loc":"-350 -122.5"},
{"key":-62,"caption":"Generic Object","type":"Round Table","shape":"Rectangle","width":112,"height":48,"notes":"","loc":"-212.78305701335879 229.72300214694658"},
{"key":-63,"caption":"Generic Object","type":"Round Table","shape":"Rectangle","width":100,"height":33,"notes":"","loc":"294.5170052107034 303.555"},
{"key":-64,"caption":"Generic Object","type":"Round Table","shape":"Rectangle","width":50,"height":50,"notes":"","loc":"104.80127361566578 -116.68780334364718"},
{"category":"wallPart","type":"window","linkKey":-12,"segFrac":0.42857142857142855,"size":"81 10","key":-65},
{"key":-66,"caption":"Shower/Tub","type":"Shower/Tub","geoType":"shower","width":45,"height":75,"notes":"","loc":"429.6586269442337 375.36117104514415"},
{"category":"wallPart","type":"window","linkKey":-10,"segFrac":0.7058823529411765,"size":"70 10","key":-67},
{"key":-74,"caption":"Generic Object","type":"Round Table","shape":"Rectangle","width":37,"height":97,"notes":"","loc":"660 150"},
{"category":"room","fill":"burlywood","geo":"F M0 0 L400 0 L400 80 L400 180 L240 180 L240 340 L0 340 L0 0","loc":"-400 -150","pointKeys":[-1,-8,-12,-13,-29,-30,-6],"area":102217.5,"key":-68,"alignment":"0.5 0.5 66.0915093892261 -58.197784284901374","text":"Bedroom"},
{"category":"room","fill":"whitesmoke","geo":"F M0 0 L0 -100 L0 -180 L460 -180 L460 160 L180 160 L80 160 L0 160 L0 0","loc":"0 -150","pointKeys":[-13,-12,-8,-5,-11,-10,-9,-7],"area":147240,"key":-69,"text":"Kitchen","alignment":"0.5 0.5 -91.82935200113809 -0.8428964339909086"},
{"category":"room","fill":"whitesmoke","geo":"F M0 0 L160 0 L160 160 L0 160 L0 0","loc":"-160 30","pointKeys":[-29,-13,-7,-30],"area":22500,"key":-70,"alignment":"0.5 0.5 -9.318220077769354 23.706462205993915","text":"Bathroom 1"},
{"category":"room","fill":"whitesmoke","geo":"F M0 0 L210 0 L210 120 L0 120 L0 0","loc":"250 330","pointKeys":[-35,-34,-3,-36],"area":21600,"key":-72,"alignment":"0.5 0.5 -40.2820205804249 6.844319044006056","text":"Bathroom 2"},
{"category":"room","fill":"antiquewhite","geo":"F M0 0 L240 0 L400 0 L480 0 L580 0 L860 0 L860 140 L650 140 L650 260 L0 260 L0 0","loc":"-400 190","pointKeys":[-6,-30,-7,-9,-10,-11,-34,-35,-36,-2],"area":185245.5,"key":-71,"text":"Main Room","alignment":"0.5 0.5 45.954713581183626 -14.421957985584243"},
{"category":"wallPoint","loc":"700 -50","size":14,"rooms":[-84],"key":-73,"miterPoints":["707 -53.2786246218911","693 -46.7213753781089"]},
{"category":"wallPoint","loc":"700 350","size":14,"rooms":[-84],"key":-75,"miterPoints":["707 353.2786246218911","693 346.7213753781089"]},
{"category":"wallPart","type":"window","linkKey":-23,"segFrac":0.275,"size":"130 14","key":-80},
{"category":"wallPart","type":"window","linkKey":-23,"segFrac":0.725,"size":"130 14","key":-81},
{"category":"wallPoint","loc":"580 450","size":14,"rooms":[-84],"key":-76,"miterPoints":["577.4656504537306 443","582.5343495462694 457"]},
{"category":"wallPoint","loc":"580 -150","size":14,"rooms":[-84],"key":-77,"miterPoints":["582.5343495462694 -157","577.4656504537306 -143"]},
{"category":"wallPart","type":"door","linkKey":-24,"segFrac":0.5,"size":"60 14","flipped":true,"swapped":false,"alignOffset":-30,"key":-78},
{"category":"wallPart","type":"window","linkKey":-25,"segFrac":0.5121475197315839,"size":"120.66068747318505 14","key":-79},
{"category":"wallPart","type":"window","linkKey":-27,"segFrac":0.5121475197315839,"size":"118.20499351813308 14","key":-82},
{"category":"wallPart","type":"window","linkKey":-26,"segFrac":0.5,"size":"60 14","key":-83},
{"category":"room","fill":"burlywood","geo":"F M0 0 L120 0 L240 100 L240 500 L120 600 L0 600 L0 480 L0 340 L0 0","loc":"460 -150","pointKeys":[-5,-77,-73,-75,-76,-3,-34,-11],"area":122484.5117291004,"text":"Sun Room","key":-84,"alignment":"0.5 0.5 -9.32424260496191 -0.5130665553434994"},
{"category":"wallPoint","loc":"-500 -150","size":10,"miterPoints":[],"rooms":[],"key":-85},
{"category":"wallPoint","loc":"-500 450","size":10,"miterPoints":[],"rooms":[],"key":-86},
{"category":"wallPoint","loc":"-450 190","size":10,"miterPoints":[],"rooms":[],"key":-87},
{"category":"wallPoint","loc":"-450 450","size":10,"miterPoints":[],"rooms":[],"key":-88},
{"category":"wallPoint","loc":"80 210","size":10,"miterPoints":[],"rooms":[],"key":-89},
{"category":"wallPoint","loc":"180 210","size":10,"miterPoints":[],"rooms":[],"key":-90},
{"category":"wallPoint","loc":"460 -180","size":10,"miterPoints":[],"rooms":[],"key":-91},
{"category":"wallPoint","loc":"700 -180","size":10,"miterPoints":[],"rooms":[],"key":-92},
{"category":"wallPoint","loc":"739.9729952662352 -4.953669894975299","size":10,"miterPoints":[],"rooms":[],"key":-93},
{"category":"wallPoint","loc":"739.8569952662352 125.9553301050247","size":10,"miterPoints":[],"rooms":[],"key":-94},
{"category":"wallPoint","loc":"-400 500","size":10,"miterPoints":[],"rooms":[],"key":-95},
{"category":"wallPoint","loc":"700 500","size":10,"miterPoints":[],"rooms":[],"key":-96},
{"category":"wallPoint","loc":"-300 440","size":10,"miterPoints":[],"rooms":[],"key":-97},
{"category":"wallPoint","loc":"-300 200","size":10,"miterPoints":[],"rooms":[],"key":-98},
{"key":-99,"caption":"Generic Object","type":"Round Table","shape":"Rectangle","width":97,"height":24.999999999999996,"notes":"","loc":"229.13133632695013 -129.96205202381435"},
{"key":-100,"caption":"Generic Object","type":"Round Table","shape":"Rectangle","width":41,"height":24.999999999999996,"notes":"","loc":"343.41135516279115 -130.02766826600978"},
{"key":-101,"caption":"Generic Object","type":"Round Table","shape":"Rectangle","width":73,"height":24.999999999999996,"notes":"","loc":"42.5 -130"}
],
  "linkDataArray": [
{"category":"wallLink","from":-1,"fromPortId":"","to":-6,"toPortId":"","width":14,"wallparts":[-26],"key":-1},
{"category":"wallLink","from":-2,"fromPortId":"","to":-36,"toPortId":"","width":14,"wallparts":[-41,-42],"key":-2},
{"category":"wallLink","from":-5,"fromPortId":"","to":-8,"toPortId":"","width":14,"wallparts":[-24,-23,-22],"key":-5},
{"category":"wallLink","from":-6,"fromPortId":"","to":-30,"toPortId":"","width":10,"wallparts":[],"key":-6},
{"category":"wallLink","from":-6,"fromPortId":"","to":-2,"toPortId":"","width":14,"wallparts":[-18],"key":-7},
{"category":"wallLink","from":-8,"fromPortId":"","to":-1,"toPortId":"","width":14,"wallparts":[-25],"key":-8},
{"category":"wallLink","from":-7,"fromPortId":"","to":-9,"toPortId":"","width":10,"wallparts":[],"key":-9},
{"category":"wallLink","from":-5,"fromPortId":"","to":-11,"toPortId":"","width":10,"wallparts":[-28,-67],"key":-10},
{"category":"wallLink","from":-11,"fromPortId":"","to":-34,"toPortId":"","width":10,"wallparts":[-27],"key":-11},
{"category":"wallLink","from":-10,"fromPortId":"","to":-11,"toPortId":"","width":10,"wallparts":[-65],"key":-12},
{"category":"wallLink","from":-8,"fromPortId":"","to":-12,"toPortId":"","width":10,"wallparts":[],"key":-13},
{"category":"wallLink","from":-7,"fromPortId":"","to":-13,"toPortId":"","width":10,"wallparts":[],"key":-14},
{"category":"wallLink","from":-13,"fromPortId":"","to":-29,"toPortId":"","width":10,"wallparts":[],"key":-15},
{"category":"wallLink","from":-30,"fromPortId":"","to":-7,"toPortId":"","width":10,"wallparts":[],"key":-16},
{"category":"wallLink","from":-29,"fromPortId":"","to":-30,"toPortId":"","width":10,"wallparts":[-31],"key":-17},
{"category":"wallLink","from":-34,"fromPortId":"","to":-35,"toPortId":"","width":10,"wallparts":[],"key":-18},
{"category":"wallLink","from":-34,"fromPortId":"","to":-3,"toPortId":"","width":10,"wallparts":[],"key":-19},
{"category":"wallLink","from":-36,"fromPortId":"","to":-3,"toPortId":"","width":14,"wallparts":[-39],"key":-20},
{"category":"wallLink","from":-35,"fromPortId":"","to":-36,"toPortId":"","width":10,"wallparts":[-40],"key":-21},
{"category":"wallLink","from":-73,"fromPortId":"","to":-75,"toPortId":"","width":14,"wallparts":[-80,-81],"key":-23},
{"category":"wallLink","from":-3,"fromPortId":"","to":-76,"toPortId":"","width":14,"wallparts":[-78],"key":-24},
{"category":"wallLink","from":-76,"fromPortId":"","to":-75,"toPortId":"","width":14,"wallparts":[-79],"key":-25},
{"category":"wallLink","from":-5,"fromPortId":"","to":-77,"toPortId":"","width":14,"wallparts":[-83],"key":-26},
{"category":"wallLink","from":-77,"fromPortId":"","to":-73,"toPortId":"","width":14,"wallparts":[-82],"key":-27},
{"category":"divider","from":-12,"fromPortId":"","to":-13,"toPortId":"","key":-28},
{"category":"divider","from":-9,"fromPortId":"","to":-10,"toPortId":"","key":-29},
{"category":"measurement","from":-85,"fromPortId":"","to":-86,"toPortId":"","key":-30},
{"category":"measurement","from":-87,"fromPortId":"","to":-88,"toPortId":"","key":-31},
{"category":"measurement","from":-89,"fromPortId":"","to":-90,"toPortId":"","key":-32},
{"category":"measurement","from":-91,"fromPortId":"","to":-92,"toPortId":"","key":-33},
{"category":"measurement","from":-93,"fromPortId":"","to":-94,"toPortId":"","key":-34},
{"category":"measurement","from":-95,"fromPortId":"","to":-96,"toPortId":"","key":-35},
{"category":"measurement","from":-97,"fromPortId":"","to":-98,"toPortId":"","key":-36}
]}`;
</script>

<div class="h-full w-full p-2 flex flex-col">
  <p>Diagram Model saved in JSON format:</p>
  <div class="flex-1">
    <textarea id="exampleModel" class="w-full h-full border rounded p-1 resize-none dark:bg-fp-bg-darkened"  bind:value={model}></textarea>
  </div>
</div>